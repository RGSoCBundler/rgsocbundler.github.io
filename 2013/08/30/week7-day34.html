<!doctype html>
<html>
  <head>
    <title>RGSoCBundler Team Blog</title>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="RGSoC Bundler Team Blog">
    <meta name="author" content="Jen Diamond, Joyce Hsu, Jessica Lynn Suttles">
    <link rel="alternate" type="application/rss+xml"
      title="RGSoCBundler Team Blog - RSS"
      href="http://rgsocbundler.github.io/feed.xml"
    />
    <link rel="alternate" type="application/atom+xml"
      title="RGSoCBundler Team Blog - RSS"
      href="http://rgsocbundler.github.io/feed.xml"
    />

    <link href="/stylesheets/all.css" rel="stylesheet">
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">
    <link href="/stylesheets/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/stylesheets/social-buttons.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet">
    <link href="/stylesheets/buttons.css" rel="stylesheet">



    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="/stylesheets/html5shiv.js"></script>
    <![endif]-->

  </head>
  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="/"><i class="icon-fixed-width icon-home"></i> RGSoC Bundler Team</a>
          <div class="nav-collapse collapse">
            <p class="navbar-text pull-right">
              Fork this blog on <a href="https://github.com/RGSoCBundler/rgsocbundler.github.io" class="navbar-link">Github</a>!
            </p>
            <ul class="nav">
              <li><a rel="alternate" href="/feed.xml">RSS</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span9">
          <div class="row-fluid">
            <div id="main" role="main" class="well">
              <h1 id="week-7-day-34">Week 7 Day 34</h1>

<h2 id="its-optimize-friday">It's Optimize Friday</h2>

<iframe width="560" height="315" src="//www.youtube.com/embed/kfVsfOSbJY0" frameborder="0" allowfullscreen=""></iframe>

<p>ORRRR</p>

<iframe width="560" height="315" src="//www.youtube.com/embed/hxleH60hDJY" frameborder="0" allowfullscreen=""></iframe>

<h3 id="jens-friday">Jen's Friday</h3>
<p>I am back to working on the issue where when you run <code>bundle oudated gem-not-in-your-Gemfile</code> it returns that your bundle is up to date. In this example the serv gem is not in the Gemfile.</p>

<pre><code>$ bundle outdated serv
  Fetching gem metadata from https://rubygems.org/..........
  Fetching gem metadata from https://rubygems.org/..
  Resolving dependencies...

  Your bundle is up to date!
</code></pre>

<p>I was looking at the <code>bundler/lib/bundler/cli.rb</code> files. In the bundle desc inject section I found a def not_found_message that looks similar to what I want to do; identify a missing gem.</p>

<p>def not_found_message(missing_gem_name, alternatives) message = "Could not find gem '#{missing_gem_name}'."</p>

<pre><code># This is called as the result of a GemNotFound, let's see if
# there's any similarly named ones we can propose instead
alternate_names = alternatives.map { |a| a.respond_to?(:name) ? a.name : a }
suggestions = SimilarityDetector.new(alternate_names).similar_word_list(missing_gem_name)
message += "\nDid you mean #{suggestions}?" if suggestions
message
end
</code></pre>

<p>I ran `bundle inject</p>

<pre><code>$ bundle inject blurg 1.0.0
  Fetching gem metadata from https://rubygems.org/..........
  Fetching gem metadata from https://rubygems.org/..
  Resolving dependencies...
  Could not find gem 'blurg (= 1.0.0) ruby' in the gems available on this machine.
</code></pre>

<p>This seemed closer to the error I want to see when I run bundle outdated non-existing-gem so I decide to check out a few more command to see if I could find one with a message I'd like to see.</p>

<p>I ran <code>bundle show serv</code> (The serv gem is NOT in the Gemfile.)</p>

<pre><code>$ bundle show serv
  Could not find gem 'serv'.
  Did you mean sdoc?
</code></pre>

<p>This is even closer to the error I want to see. So I checked out the code in the desc show section of the bundler/lib/bundler/cli.rb file.</p>

<pre><code>desc "show [GEM]", "Shows all gems that are part of the bundle, or the path to a given gem"
long_desc &lt;&lt;-D
  Show lists the names and versions of all gems that are required by your Gemfile.
  Calling show with [GEM] will list the exact location of that gem on your machine.
D
method_option "paths", :type =&gt; :boolean,
  :banner =&gt; "List the paths of all gems that are required by your Gemfile."
def show(gem_name = nil)
  Bundler.ui.silence do
    Bundler.definition.validate_ruby!
    Bundler.load.lock
  end

  if gem_name
    if gem_name == "bundler"
      path = File.expand_path("../../..", __FILE__)
    else
      spec = select_spec(gem_name, :regex_match)
      return unless spec
      path = spec.full_gem_path
      if !File.directory?(path)
        Bundler.ui.warn "The gem #{gem_name} has been deleted. It was installed at:"
      end
    end
    return Bundler.ui.info(path)
  end

  if options[:paths]
    Bundler.load.specs.sort_by { |s| s.name }.map do |s|
      Bundler.ui.info s.full_gem_path
    end
  else
    Bundler.ui.info "Gems included by the bundle:"
    Bundler.load.specs.sort_by { |s| s.name }.each do |s|
      Bundler.ui.info "  * #{s.name} (#{s.version}#{s.git_version})"
    end
  end
end
</code></pre>

<p>I am now working on a path that will lead me to the answer…</p>

<h3 id="joyces-friday">Joyce's Friday</h3>
<p>Started looking at another bundler feature/issue. The feature I am looking to add is when you <code>bundle update</code>, it shows the old version of the gem being updated. I started a rspec test for it.</p>

<p>I received feedback and suggestions for my first addition/fix to the Bundler repo. I made improvements to it based on the comment I received. I made a method to store <code>Bundler.which(“git”)</code> in an instance variable inside bundler.rb. According to mentor Andre, we store it in an instance variable so we only have to look for git once. Instead of having to keep looking for git again and again repeatedly. This technique is called “"memoization."</p>

<p>Original:</p>

<pre><code>raise GitError, “Git is not installed!” if !Bundler.which(“git”)
</code></pre>

<p>Improved:</p>

<pre><code>raise GitError, "Git is not installed!" if !Bundler.git_present?
</code></pre>

            </div>
          </div>
        </div>
        <div class="span3">
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li class="nav-header">Recent Posts</li>
              
                <li><a href="/2013/09/23/week10-day50.html">Week 10 Day 50 Come in Travis</a></li>
              
                <li><a href="/2013/09/20/week10-day48.html">Week 10 Day 48 Friday</a></li>
              
                <li><a href="/2013/09/19/week10-day47.html">Week 10 Day 47 begin end bundle update</a></li>
              
                <li><a href="/2013/09/17/week10-day45.html">Week 10 Day 45 Gemfile.lock</a></li>
              
                <li><a href="/2013/09/16/week10-day44.html">Week 10 Day 44 Testing & Committing</a></li>
              
                <li><a href="/2013/09/15/week9-day43.html">Week 9 Day 43 Prime</a></li>
              
                <li><a href="/2013/09/11/week9-day41.html">Week 9 Day 41 Humpty Dumpty</a></li>
              
                <li><a href="/2013/09/10/week9-day40.html">Week 9 Day 40 Games and Tests</a></li>
              
                <li><a href="/2013/09/09/week9-day39.html">Week 9 Day 39 Fixer Uppers</a></li>
              
                <li><a href="/2013/09/06/week8-day38.html">Week 8 Day 38 Gem Features</a></li>
              
              <li class="nav-header">Tags</li>
              
                <li><a href="/tags/goals.html">#goals (1)</a></a></li>
              
                <li><a href="/tags/tools.html">#tools (4)</a></a></li>
              
                <li><a href="/tags/log.html">#log (43)</a></a></li>
              
              <li class="nav-header">Contributors</li>
              <li><a href="/jen-diamond">Jen Diamond / Student</a></li>
              <li><a href="/joyce-hsu">Joyce Hsu / Student</a></li>
              <li><a href="/jessica-lynn-suttles">Jessica Suttles / Coach</a></li>
              <li><a href="/andre-arko">André Arko / Mentor</a></li>
              <li class="nav-header">Elsewhere</li>

              <li><a href="http://github.com/RGSoCBundler"><button class="btn btn-github"><i class="icon-github"></i>Github</button></a></li>
              <li><a href="http://twitter.com/RGSoCBundler"><button class="btn btn-twitter"><i class="icon-twitter"></i>Twitter</button></a></li>
            </ul>
          </div><!--/.well -->
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li class="nav-header">References</li>
              <li><a href="/links">Links</a></li>
              <li class="nav-header">Cheat Sheets</li>
              <li><a href="/cheatsheets/pull.html">Pull Requesting</a></li>
              <li><a href="/cheatsheets/bundlerfordev.html">Bundler for Development</a></li>
              <li><a href="/cheatsheets/create_gem.html">Create a Gem</a></li>
              <li><a href="/cheatsheets/adding-cli-to-a-gem-using-thor.html">Using Thor to Add CLI</a></li>
            </ul>
          </div><!--/.well -->
        </div><!--/span-->
      </div>
    </div>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/bootstrap.min.js"></script>
  </body>
</html>

